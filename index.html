<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aces of Valor - Dashboard</title>
    <style>
        :root {
            --gold: #d4af37;
            --dark-blue: #1c2833;
            --paper: #f4ecd8;
            --accent: #e67e22;
        }
        body { 
            font-family: 'Courier New', Courier, monospace; 
            background-color: var(--dark-blue); 
            color: #ecf0f1; 
            margin: 0; padding: 15px;
        }
        .container { max-width: 600px; margin: auto; }
        
        /* Stile Vintage Card */
        .phase { 
            display: none; 
            background: rgba(44, 62, 80, 0.9); 
            padding: 20px; 
            border-radius: 5px; 
            border: 2px solid var(--gold);
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .active { display: block; animation: fadeIn 0.5s; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h1 { color: var(--gold); text-align: center; border-bottom: 2px double var(--gold); padding-bottom: 10px; }
        h2 { font-size: 1.2rem; color: var(--gold); text-transform: uppercase; margin-top: 0; }

        /* Input e Button */
        select, input { 
            width: 100%; padding: 12px; margin: 10px 0; 
            background: var(--paper); color: #333; 
            border: none; border-radius: 3px; font-weight: bold;
        }
        button { 
            background: var(--accent); color: white; border: none; 
            padding: 15px; border-radius: 3px; cursor: pointer; 
            font-weight: bold; width: 100%; text-transform: uppercase;
            box-shadow: 0 3px 0 #a04000; transition: 0.2s;
        }
        button:active { transform: translateY(3px); box-shadow: none; }
        
        .btn-nav { background: #27ae60; box-shadow: 0 3px 0 #196f3d; margin-top: 20px; }

        /* Risultati */
        .result-box { 
            background: rgba(244, 236, 216, 0.1); 
            padding: 15px; margin-top: 15px; 
            border-left: 5px solid var(--gold); font-size: 1rem;
        }
        
        .pilot-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .pilot-card { background: rgba(0,0,0,0.2); padding: 5px 10px; border: 1px solid #555; }

        table { width: 100%; margin-top: 15px; border-collapse: collapse; background: #f4ecd8; color: #333; }
        th, td { border: 1px solid #333; padding: 8px; text-align: center; }
        th { background: #d5dbdb; }

        .status-bar { text-align: center; margin-bottom: 10px; color: var(--gold); font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>üõ©Ô∏è ACES OF VALOR</h1>

    <div id="phase1" class="phase active">
        <div class="status-bar">LOGBOOK - FASE 1</div>
        <h2>Configura Campagna</h2>
        <label>Durata Operazione:</label>
        <select id="campLength">
            <option value="8">CORTA (8 Missioni) - Obiettivo 21 VP</option>
            <option value="12">MEDIA (12 Missioni) - Obiettivo 29 VP</option>
            <option value="16">LUNGA (16 Missioni) - Obiettivo 36 VP</option>
        </select>
        <button class="btn-nav" onclick="cambiaFase(2)">Pianifica Squadriglia ‚ûî</button>
    </div>

    <div id="phase2" class="phase">
        <div class="status-bar">LOGBOOK - FASE 2</div>
        <h2>Assegnazione Velivoli</h2>
        <select id="nat">
            <option value="GER">üá©üá™ GERMANIA</option>
            <option value="UK">üá¨üáß REGNO UNITO</option>
            <option value="FR">üá´üá∑ FRANCIA</option>
            <option value="US">üá∫üá∏ U.S.A.</option>
        </select>
        <button onclick="calcolaTier()">üé≤ Tira Dado Tier</button>
        <div id="tierRes" class="result-box" style="display:none;"></div>
        <button class="btn-nav" onclick="cambiaFase(3)">Recluta Piloti ‚ûî</button>
    </div>

    <div id="phase3" class="phase">
        <div class="status-bar">LOGBOOK - FASE 3</div>
        <h2>Stato Piloti (Ready Box)</h2>
        <button onclick="calcolaPiloti()">üìã Genera Squadriglia</button>
        <div id="pilotRes" class="pilot-grid" style="display:none;"></div>
        <button class="btn-nav" onclick="cambiaFase(4)">Localizza Base ‚ûî</button>
    </div>

    <div id="phase4" class="phase">
        <div class="status-bar">LOGBOOK - FASE 4</div>
        <h2>Coordinate Aeroporto</h2>
        <button onclick="calcolaAeroporto()">üìç Rileva Posizione</button>
        <div id="airfieldRes" class="result-box" style="display:none; text-align:center; font-size:1.5rem;"></div>
        <button class="btn-nav" onclick="cambiaFase(5)">Inizia Missioni ‚ûî</button>
    </div>

    <div id="phase5" class="phase">
        <div class="status-bar">TABELLONE DI GUERRA</div>
        <h2>Registro Voli</h2>
        <input type="text" id="mType" placeholder="Tipo Missione (es. Patrol)">
        <input type="number" id="mPoints" placeholder="Punti Missione (MP)">
        <button style="background:#27ae60" onclick="aggiungiMissione()">Registra Risultato</button>

        <table id="missionLog">
            <thead><tr><th>M.</th><th>Tipo</th><th>MP</th><th>VP</th></tr></thead>
            <tbody></tbody>
        </table>
        
        <div class="result-box" id="totalStatus" style="text-align:center;">
            <b>VP TOTALI: 0</b>
        </div>
        <button onclick="location.reload()" style="background:#c0392b; font-size:0.8rem; margin-top:40px;">‚ö†Ô∏è Resetta Campagna</button>
    </div>
</div>

<script>
    function cambiaFase(num) {
        const fasi = document.getElementsByClassName('phase');
        for (let i = 0; i < fasi.length; i++) fasi[i].style.display = 'none';
        document.getElementById('phase' + num).classList.add('active');
        window.scrollTo(0,0);
    }

    function calcolaTier() {
        const n = document.getElementById('nat').value;
        const d = Math.floor(Math.random() * 6) + 1;
        const t = d <= 2 ? 1 : (d <= 4 ? 2 : 3);
        const planes = {
